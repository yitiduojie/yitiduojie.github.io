<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Binutils Package | 一题多解</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <meta name="description" content="能看懂的自然哲学">
    <link rel="preload" href="/assets/css/0.styles.2be61e54.css" as="style"><link rel="preload" href="/assets/js/app.37a39986.js" as="script"><link rel="preload" href="/assets/js/2.ee13784e.js" as="script"><link rel="preload" href="/assets/js/13.ce819162.js" as="script"><link rel="prefetch" href="/assets/js/10.962cfda8.js"><link rel="prefetch" href="/assets/js/11.1e63d3ce.js"><link rel="prefetch" href="/assets/js/12.f1e7b320.js"><link rel="prefetch" href="/assets/js/14.9f3a6825.js"><link rel="prefetch" href="/assets/js/15.37a691aa.js"><link rel="prefetch" href="/assets/js/16.31d12157.js"><link rel="prefetch" href="/assets/js/17.02cc7ca5.js"><link rel="prefetch" href="/assets/js/18.a9dece1e.js"><link rel="prefetch" href="/assets/js/19.13856d87.js"><link rel="prefetch" href="/assets/js/20.f565e61c.js"><link rel="prefetch" href="/assets/js/21.46f1cc0b.js"><link rel="prefetch" href="/assets/js/22.f3b3c14e.js"><link rel="prefetch" href="/assets/js/23.a57bd243.js"><link rel="prefetch" href="/assets/js/24.30049bd7.js"><link rel="prefetch" href="/assets/js/25.c7fb3044.js"><link rel="prefetch" href="/assets/js/26.0071db99.js"><link rel="prefetch" href="/assets/js/27.220d0597.js"><link rel="prefetch" href="/assets/js/28.1fe15f98.js"><link rel="prefetch" href="/assets/js/3.4147aeb1.js"><link rel="prefetch" href="/assets/js/4.4ca09063.js"><link rel="prefetch" href="/assets/js/5.46f7f6d3.js"><link rel="prefetch" href="/assets/js/6.726cd637.js"><link rel="prefetch" href="/assets/js/7.2a357697.js"><link rel="prefetch" href="/assets/js/8.52e2e2fd.js"><link rel="prefetch" href="/assets/js/9.0f6c23a3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2be61e54.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container middle-class"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一题多解</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/basic/" class="nav-link">
  小学
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  中学
</a></div><div class="nav-item"><a href="/high/" class="nav-link router-link-active">
  大学
</a></div><div class="nav-item"><a href="/binder/" class="nav-link">
  模拟
</a></div><div class="nav-item"><a href="/jin/" class="nav-link">
  统计物理
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/basic/" class="nav-link">
  小学
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  中学
</a></div><div class="nav-item"><a href="/high/" class="nav-link router-link-active">
  大学
</a></div><div class="nav-item"><a href="/binder/" class="nav-link">
  模拟
</a></div><div class="nav-item"><a href="/jin/" class="nav-link">
  统计物理
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/high/" class="sidebar-link">大学数学</a></li><li><a href="/high/expansion.html" class="sidebar-link">矢量的分解</a></li><li><a href="/high/what_is_shearlet.html" class="sidebar-link">Shearlets表示</a></li><li><a href="/high/binutils.html" class="active sidebar-link">Binutils Package</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/high/binutils.html#binutils-package" class="sidebar-link">Binutils Package</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#编译" class="sidebar-link">编译</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#readelf" class="sidebar-link">readelf</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#ldd" class="sidebar-link">ldd</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#size" class="sidebar-link">size</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#strings" class="sidebar-link">Strings</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#objdump" class="sidebar-link">objdump</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#strip" class="sidebar-link">strip</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#addr2line" class="sidebar-link">addr2line</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#nm" class="sidebar-link">nm</a></li></ul></li><li><a href="/high/cp2k_installation.html" class="sidebar-link">CP2K</a></li><li><a href="/high/functional_derivatives.html" class="sidebar-link">Functional Derivatives</a></li><li><a href="/high/dipole_derivatives.html" class="sidebar-link">Dipole derivatives</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="binutils-package"><a href="#binutils-package" class="header-anchor">#</a> Binutils Package</h2> <blockquote><p>作者: Dylan Huang</p> <p>日期：2019年10月16日</p></blockquote> <p>A basic fact is : CPU读的是机器语言（二进制）指令，而不是源代码！</p> <h2 id="编译"><a href="#编译" class="header-anchor">#</a> 编译</h2> <p>编译是什么？是这样一个过程，将一个程序由其某一种语言写成的源代码形式转换成机器代码的过程。[1] 机器代码往往以某种特殊格式保存，称为可执行文件，或二进制文件(binaray file). 在Linux和BSD系统中，它又称为ELF（Executable and Linkable Format）.</p> <h2 id="readelf"><a href="#readelf" class="header-anchor">#</a> readelf</h2> <p>举例。用readelf查看ls命令的信息:
(base) huang@xian /home/huang/git/yitiduojie_source/high [55]$ readelf -h /bin/ls
ELF Header:
Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00
Class:                             ELF64
Data:                              2's complement, little endian
Version:                           1 (current)
OS/ABI:                            UNIX - System V
ABI Version:                       0
Type:                              DYN (Shared object file)
Machine:                           Advanced Micro Devices X86-64
Version:                           0x1
Entry point address:               0x5850
Start of program headers:          64 (bytes into file)
Start of section headers:          132000 (bytes into file)
Flags:                             0x0
Size of this header:               64 (bytes)
Size of program headers:           56 (bytes)
Number of program headers:         9
Size of section headers:           64 (bytes)
Number of section headers:         28
Section header string table index: 27</p> <p>用ldd命令查看ls命令依赖于那些系统库(system libraries):</p> <p>(base) huang@xian /home/huang/git/yitiduojie_source/high [56]$ ldd /bin/ls
linux-vdso.so.1 (0x00007fffc07a2000)
libselinux.so.1 =&gt; /lib/x86_64-linux-gnu/libselinux.so.1 (0x00007f2ab86b2000)
libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2ab82c1000)
libpcre.so.3 =&gt; /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f2ab804f000)
libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f2ab7e4b000)
/lib64/ld-linux-x86-64.so.2 (0x00007f2ab8afc000)
libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f2ab7c2c000)</p> <p>对其中的/lib/x86_64-linux-gnu/libc.so.6，利用readelf查看：
(base) huang@xian /home/huang [9]$ readelf -h /lib/x86_64-linux-gnu/libc.so.6
ELF Header:
Magic:   7f 45 4c 46 02 01 01 03 00 00 00 00 00 00 00 00
Class:                             ELF64
Data:                              2's complement, little endian
Version:                           1 (current)
OS/ABI:                            UNIX - GNU
ABI Version:                       0
Type:                              DYN (Shared object file)
Machine:                           Advanced Micro Devices X86-64
Version:                           0x1
Entry point address:               0x21cb0
Start of program headers:          64 (bytes into file)
Start of section headers:          2025872 (bytes into file)
Flags:                             0x0
Size of this header:               64 (bytes)
Size of program headers:           56 (bytes)
Number of program headers:         10
Size of section headers:           64 (bytes)
Number of section headers:         73
Section header string table index: 72</p> <p>可见，/lib/x86_64-linux-gnu/libc.so.6是一个DYN（Shared object file).DYN意味着它不能直接被执行，it must by an executable file that internally uses any functions made available by the library.(它必须由在内部使用库提供的任何函数的可执行文件使用)。</p> <h2 id="ldd"><a href="#ldd" class="header-anchor">#</a> ldd</h2> <h2 id="size"><a href="#size" class="header-anchor">#</a> size</h2> <p>List section size and the total size.</p> <h2 id="strings"><a href="#strings" class="header-anchor">#</a> Strings</h2> <p>Prints the strings of printable characters in files.</p> <h2 id="objdump"><a href="#objdump" class="header-anchor">#</a> objdump</h2> <p>Displays information from object files.</p> <h2 id="strip"><a href="#strip" class="header-anchor">#</a> strip</h2> <p>Discards symbols from object files.</p> <h2 id="addr2line"><a href="#addr2line" class="header-anchor">#</a> addr2line</h2> <p>将地址转化为文件名或行数(line numbers)</p> <h2 id="nm"><a href="#nm" class="header-anchor">#</a> nm</h2> <p>Lists symbols from object files.</p> <h3 id="注释："><a href="#注释：" class="header-anchor">#</a> 注释：</h3> <p>[0] Gaurav Kamathe, 9 essential GNU binutils tools.
[1] R. Antonsen在TED演讲中提到一个观念：理解的本质是具有改变视角(perspective)的能力。程序好比一种Antonsen所谓的&quot;模式”，而其不同语言形式，只是视角不同而已。它们其实是等价的。
[2]GCC, GNU Compiler Collection: 它的功能是将经过预处理(如C prprocessor, cpp)的源代码转化为汇编语言。
[3]汇编程序 assembler: 其目的是将汇编语言指令转化成机器代码，并产生一个具有扩展名为.o的对象文件。在Linux平台下，一般可用as命令实现：
# as hello.s -o hello.o
[4]对象文件(扩展名.o)和可执行文件有差别。一个可执行文件往往需要来自系统库的外部函数。
[5]ld命令:是一个连接工具。 其目的是：将多个对象文件连接(link)到一起,并生成一个可执行文件。（ld如何实现linking?以后再具体说）
[6]readelf命令：其作用是给出一个二进制文件的大量信息，例如它是ELF64-bit格式，还是ELF32-bit格式，</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/high/what_is_shearlet.html" class="prev">
        Shearlets表示
      </a></span> <span class="next"><a href="/high/cp2k_installation.html">
        CP2K
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.37a39986.js" defer></script><script src="/assets/js/2.ee13784e.js" defer></script><script src="/assets/js/13.ce819162.js" defer></script>
  </body>
</html>
