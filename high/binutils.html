<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Binutils Package | 一题多解</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="description" content="能看懂的自然哲学">
    <link rel="preload" href="/assets/css/0.styles.2be61e54.css" as="style"><link rel="preload" href="/assets/js/app.7a37fe48.js" as="script"><link rel="preload" href="/assets/js/2.94db9d73.js" as="script"><link rel="preload" href="/assets/js/16.eaacdad2.js" as="script"><link rel="prefetch" href="/assets/js/10.355442f0.js"><link rel="prefetch" href="/assets/js/11.16a47619.js"><link rel="prefetch" href="/assets/js/12.7c8314a2.js"><link rel="prefetch" href="/assets/js/13.cc645201.js"><link rel="prefetch" href="/assets/js/14.d7ebbf4e.js"><link rel="prefetch" href="/assets/js/15.a855b40d.js"><link rel="prefetch" href="/assets/js/17.c02035ee.js"><link rel="prefetch" href="/assets/js/18.fe6d7cbd.js"><link rel="prefetch" href="/assets/js/19.d4c260af.js"><link rel="prefetch" href="/assets/js/20.76a28890.js"><link rel="prefetch" href="/assets/js/21.9d8877d2.js"><link rel="prefetch" href="/assets/js/22.41fe3367.js"><link rel="prefetch" href="/assets/js/23.1dc2f055.js"><link rel="prefetch" href="/assets/js/24.95bbb760.js"><link rel="prefetch" href="/assets/js/25.7b0d36f6.js"><link rel="prefetch" href="/assets/js/26.b7ce1913.js"><link rel="prefetch" href="/assets/js/27.9aae763a.js"><link rel="prefetch" href="/assets/js/28.d282ce5d.js"><link rel="prefetch" href="/assets/js/29.3c60988b.js"><link rel="prefetch" href="/assets/js/3.f5727805.js"><link rel="prefetch" href="/assets/js/30.bdd1fb72.js"><link rel="prefetch" href="/assets/js/31.76945903.js"><link rel="prefetch" href="/assets/js/32.5fe4b495.js"><link rel="prefetch" href="/assets/js/33.88632f1e.js"><link rel="prefetch" href="/assets/js/34.4ffaeeb4.js"><link rel="prefetch" href="/assets/js/35.c97f5ab2.js"><link rel="prefetch" href="/assets/js/36.b8b2ba65.js"><link rel="prefetch" href="/assets/js/4.6eaeb686.js"><link rel="prefetch" href="/assets/js/5.500f7896.js"><link rel="prefetch" href="/assets/js/6.eace6a43.js"><link rel="prefetch" href="/assets/js/7.b0148503.js"><link rel="prefetch" href="/assets/js/8.932ff0f1.js"><link rel="prefetch" href="/assets/js/9.b29338cf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2be61e54.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container middle-class"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">一题多解</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/basic/" class="nav-link">
  小学
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  中学
</a></div><div class="nav-item"><a href="/high/" class="nav-link router-link-active">
  大学
</a></div><div class="nav-item"><a href="/binder/" class="nav-link">
  模拟
</a></div><div class="nav-item"><a href="/jin/" class="nav-link">
  SM
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/basic/" class="nav-link">
  小学
</a></div><div class="nav-item"><a href="/middle/" class="nav-link">
  中学
</a></div><div class="nav-item"><a href="/high/" class="nav-link router-link-active">
  大学
</a></div><div class="nav-item"><a href="/binder/" class="nav-link">
  模拟
</a></div><div class="nav-item"><a href="/jin/" class="nav-link">
  SM
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/high/" class="sidebar-link">大学数学</a></li><li><a href="/high/huang--la.html" class="sidebar-link">从线性方程谈起</a></li><li><a href="/high/expansion.html" class="sidebar-link">矢量的分解</a></li><li><a href="/high/what_is_shearlet.html" class="sidebar-link">Shearlets表示</a></li><li><a href="/high/binutils.html" class="active sidebar-link">Binutils Package</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/high/binutils.html#binutils-package" class="sidebar-link">Binutils Package</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#编译" class="sidebar-link">编译</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#readelf" class="sidebar-link">readelf</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#ldd" class="sidebar-link">ldd</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#size" class="sidebar-link">size</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#strings" class="sidebar-link">Strings</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#objdump" class="sidebar-link">objdump</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#strip" class="sidebar-link">strip</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#addr2line" class="sidebar-link">addr2line</a></li><li class="sidebar-sub-header"><a href="/high/binutils.html#nm" class="sidebar-link">nm</a></li></ul></li><li><a href="/high/cp2k_installation.html" class="sidebar-link">CP2K</a></li><li><a href="/high/functional_derivatives.html" class="sidebar-link">Functional Derivatives</a></li><li><a href="/high/dipole_derivatives.html" class="sidebar-link">Dipole derivatives</a></li><li><a href="/high/sfg.html" class="sidebar-link">Sum-Frequency Generation Spectroscopy</a></li><li><a href="/high/git.html" class="sidebar-link">Git</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="binutils-package"><a href="#binutils-package" class="header-anchor">#</a> Binutils Package</h2> <blockquote><p>作者: Dylan Clark</p> <p>日期：2019年10月16日</p></blockquote> <p>A basic fact is : CPU读的是机器语言（二进制）指令，而不是源代码！</p> <h2 id="编译"><a href="#编译" class="header-anchor">#</a> 编译</h2> <p>编译是什么？是这样一个过程，将一个程序由其某一种语言写成的源代码形式转换成机器代码的过程。[1] 机器代码往往以某种特殊格式保存，称为可执行文件，或二进制文件(binaray file). 在Linux和BSD系统中，它又称为ELF（Executable and Linkable Format）.</p> <h2 id="readelf"><a href="#readelf" class="header-anchor">#</a> readelf</h2> <p>举例。用readelf查看ls命令的信息:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> huang@xian /home/huang/git/yitiduojie_source/high <span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">]</span>$ readelf -h /bin/ls
ELF Header:
  Magic:   7f <span class="token number">45</span> 4c <span class="token number">46</span> 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              <span class="token number">2</span>'s complement, little endian
  Version:                           <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>
  OS/ABI:                            UNIX - System V
  ABI Version:                       <span class="token number">0</span>
  Type:                              DYN <span class="token punctuation">(</span>Shared object <span class="token function">file</span><span class="token punctuation">)</span>
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x5850
  Start of program headers:          <span class="token number">64</span> <span class="token punctuation">(</span>bytes into <span class="token function">file</span><span class="token punctuation">)</span>
  Start of section headers:          <span class="token number">132000</span> <span class="token punctuation">(</span>bytes into <span class="token function">file</span><span class="token punctuation">)</span>
  Flags:                             0x0
  Size of this header:               <span class="token number">64</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Size of program headers:           <span class="token number">56</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Number of program headers:         <span class="token number">9</span>
  Size of section headers:           <span class="token number">64</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Number of section headers:         <span class="token number">28</span>
  Section header string table index: <span class="token number">27</span>
</code></pre></div><p>用ldd命令查看ls命令依赖于那些系统库(system libraries):</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> huang@xian /home/huang/git/yitiduojie_source/high <span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">]</span>$ ldd /bin/ls
	linux-vdso.so.1 <span class="token punctuation">(</span>0x00007fffc07a2000<span class="token punctuation">)</span>
	libselinux.so.1 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libselinux.so.1 <span class="token punctuation">(</span>0x00007f2ab86b2000<span class="token punctuation">)</span>
	libc.so.6 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libc.so.6 <span class="token punctuation">(</span>0x00007f2ab82c1000<span class="token punctuation">)</span>
	libpcre.so.3 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libpcre.so.3 <span class="token punctuation">(</span>0x00007f2ab804f000<span class="token punctuation">)</span>
	libdl.so.2 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libdl.so.2 <span class="token punctuation">(</span>0x00007f2ab7e4b000<span class="token punctuation">)</span>
	/lib64/ld-linux-x86-64.so.2 <span class="token punctuation">(</span>0x00007f2ab8afc000<span class="token punctuation">)</span>
	libpthread.so.0 <span class="token operator">=</span><span class="token operator">&gt;</span> /lib/x86_64-linux-gnu/libpthread.so.0 <span class="token punctuation">(</span>0x00007f2ab7c2c000<span class="token punctuation">)</span>
</code></pre></div><p>对其中的/lib/x86_64-linux-gnu/libc.so.6，利用readelf查看：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">(</span>base<span class="token punctuation">)</span> huang@xian /home/huang <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span>$ readelf -h /lib/x86_64-linux-gnu/libc.so.6
ELF Header:
  Magic:   7f <span class="token number">45</span> 4c <span class="token number">46</span> 02 01 01 03 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              <span class="token number">2</span>'s complement, little endian
  Version:                           <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>
  OS/ABI:                            UNIX - GNU
  ABI Version:                       <span class="token number">0</span>
  Type:                              DYN <span class="token punctuation">(</span>Shared object <span class="token function">file</span><span class="token punctuation">)</span>
  Machine:                           Advanced Micro Devices X86-64
  Version:                           0x1
  Entry point address:               0x21cb0
  Start of program headers:          <span class="token number">64</span> <span class="token punctuation">(</span>bytes into <span class="token function">file</span><span class="token punctuation">)</span>
  Start of section headers:          <span class="token number">2025872</span> <span class="token punctuation">(</span>bytes into <span class="token function">file</span><span class="token punctuation">)</span>
  Flags:                             0x0
  Size of this header:               <span class="token number">64</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Size of program headers:           <span class="token number">56</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Number of program headers:         <span class="token number">10</span>
  Size of section headers:           <span class="token number">64</span> <span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>
  Number of section headers:         <span class="token number">73</span>
  Section header string table index: <span class="token number">72</span>
</code></pre></div><p>可见，/lib/x86_64-linux-gnu/libc.so.6是一个DYN（Shared object file).DYN意味着它不能直接被执行，it must by an executable file that internally uses any functions made available by the library.(它必须由在内部使用库提供的任何函数的可执行文件使用)。</p> <h2 id="ldd"><a href="#ldd" class="header-anchor">#</a> ldd</h2> <h2 id="size"><a href="#size" class="header-anchor">#</a> size</h2> <p>List section size and the total size.</p> <h2 id="strings"><a href="#strings" class="header-anchor">#</a> Strings</h2> <p>Prints the strings of printable characters in files.</p> <h2 id="objdump"><a href="#objdump" class="header-anchor">#</a> objdump</h2> <p>Displays information from object files.</p> <h2 id="strip"><a href="#strip" class="header-anchor">#</a> strip</h2> <p>Discards symbols from object files.</p> <h2 id="addr2line"><a href="#addr2line" class="header-anchor">#</a> addr2line</h2> <p>将地址转化为文件名或行数(line numbers)</p> <h2 id="nm"><a href="#nm" class="header-anchor">#</a> nm</h2> <p>Lists symbols from object files.</p> <h3 id="注释："><a href="#注释：" class="header-anchor">#</a> 注释：</h3> <p>[0] Gaurav Kamathe, 9 essential GNU binutils tools.</p> <p>[1] R. Antonsen在TED演讲中提到一个观念：理解的本质是具有改变视角(perspective)的能力。程序好比一种Antonsen所谓的&quot;模式”，而其不同语言形式，只是视角不同而已。它们其实是等价的。</p> <p>[2]GCC, GNU Compiler Collection: 它的功能是将经过预处理(如C prprocessor, cpp)的源代码转化为汇编语言。</p> <p>[3]汇编程序 assembler: 其目的是将汇编语言指令转化成机器代码，并产生一个具有扩展名为.o的对象文件。在Linux平台下，一般可用as命令实现：
# as hello.s -o hello.o</p> <p>[4]对象文件(扩展名.o)和可执行文件有差别。一个可执行文件往往需要来自系统库的外部函数。</p> <p>[5]ld命令:是一个连接工具。 其目的是：将多个对象文件连接(link)到一起,并生成一个可执行文件。（ld如何实现linking?以后再具体说）</p> <p>[6]readelf命令：其作用是给出一个二进制文件的大量信息，例如它是ELF64-bit格式，还是ELF32-bit格式，</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/high/what_is_shearlet.html" class="prev">
        Shearlets表示
      </a></span> <span class="next"><a href="/high/cp2k_installation.html">
        CP2K
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7a37fe48.js" defer></script><script src="/assets/js/2.94db9d73.js" defer></script><script src="/assets/js/16.eaacdad2.js" defer></script>
  </body>
</html>
